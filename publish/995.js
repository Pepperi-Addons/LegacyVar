(self.webpackChunklegacy_var=self.webpackChunklegacy_var||[]).push([[995],{9670:(U,M,s)=>{s.d(M,{v:()=>u});const u={AddonUUID:"2cabad50-2df0-4136-abda-03ab9c901953"}},6577:(U,M,s)=>{s.d(M,{f:()=>w});var u=s(562),a=s(6231);let w=(()=>{class r{constructor(v,j){this.route=v,this.router=j}ngOnInit(){}}return r.\u0275fac=function(v){return new(v||r)(u.\u0275\u0275directiveInject(a.ActivatedRoute),u.\u0275\u0275directiveInject(a.Router))},r.\u0275cmp=u.\u0275\u0275defineComponent({type:r,selectors:[["addon-settings"]],decls:1,vars:0,template:function(v,j){1&v&&u.\u0275\u0275element(0,"router-outlet")},dependencies:[a.RouterOutlet]}),r})()},8154:(U,M,s)=>{s.r(M),s.d(M,{SettingsModule:()=>E});var u=s(2923),g=s(384),a=s(6231);function P(o,c,n,l,f,p,m){try{var h=o[p](m),R=h.value}catch(I){return void n(I)}h.done?c(R):Promise.resolve(R).then(l,f)}var r=s(562),y=s(3191),v=s.n(y),j=s(9947);let S=(()=>{class o{constructor(n,l,f){this.session=n,this.httpService=l,this.addonService=f,this.accessToken="",this.papiBaseURL="";const p=this.session.getIdpToken();this.parsedToken=v()(p),this.papiBaseURL=this.parsedToken["pepperi.baseurl"]}get papiClient(){return new j.PapiClient({baseURL:this.papiBaseURL,token:this.session.getIdpToken(),addonUUID:this.addonUUID,suppressLogging:!0})}ngOnInit(){}getParsedToken(){const n=this.session.getIdpToken();return v()(n)}}return o.\u0275fac=function(n){return new(n||o)(r.\u0275\u0275inject(g.PepSessionService),r.\u0275\u0275inject(g.PepHttpService),r.\u0275\u0275inject(g.PepAddonService))},o.\u0275prov=r.\u0275\u0275defineInjectable({token:o,factory:o.\u0275fac,providedIn:"root"}),o})();var D=s(9670),_=s(455);let A=(()=>{class o{constructor(n,l,f,p,m){this.addonService=n,this.routeParams=l,this.router=f,this.sanitizer=p,this.location=m,this.iframesDic={},this._hostObject=null,this.hostEvents=new r.EventEmitter,this.addonService.addonUUID=D.v.AddonUUID}set hostObject(n){this._hostObject=n}get hostObject(){return this._hostObject}ngOnInit(){var n=this;return function w(o){return function(){var c=this,n=arguments;return new Promise(function(l,f){var p=o.apply(c,n);function m(R){P(p,l,f,m,h,"next",R)}function h(R){P(p,l,f,m,h,"throw",R)}m(void 0)})}}(function*(){n.fillSrcArray(),n.newStudioURL=yield n.addonService.papiClient.get("/configuration_fields?key=NewStudioUrl");let l=new URL(window.location.href).searchParams;n.view=l.get("view"),n.view&&(n.addon||n.addonService.papiClient.addons.installedAddons.get(n.addonService.addonUUID).then(f=>{n.addon=f,n.iframeCookieVersionSrc=n.sanitizer.bypassSecurityTrustResourceUrl(n.newStudioURL.Value+"/cookieVersion.html?ver="+n.addon.Version),n.tempSrc=n.newStudioURL.Value+"/"+n.iframesDic[n.view];const m=n.tempSrc.indexOf("?")>-1?"&":"?";n.tempSrc+=m+"webAppIframe=true",setTimeout(()=>{n.iframeSRC=n.sanitizer.bypassSecurityTrustResourceUrl(n.tempSrc)},50)}))})()}ngOnChanges(n){}fillSrcArray(){const n=this.addonService.getParsedToken();this.userRole=n["pepperi.employeetype"],301===this.userRole&&(this.iframesDic.var_distributors="app/default.aspx?uri=grid/vardistributors",this.iframesDic.var_pepperi_system="Views/Vars/PepperiSystem.aspx",this.iframesDic.var_pepperi_operation="Views/Vars/PepperiOperation.aspx",this.iframesDic.var_atd_templates="Views/Vars/ActivityTypeDefinitionTemplate.aspx",this.iframesDic.var_ui_control_field_bank="Views/Vars/UIControlMapper.aspx",this.iframesDic.var_ui_control_properties="Views/Vars/UIControlSetting.aspx",this.iframesDic.var_features_visibility="Views/Vars/FeaturesController.aspx",this.iframesDic.var_manage_campaigns="Views/Vars/CampaignManage.aspx",this.iframesDic.var_old_workflow_migration="Views/Vars/OldWorkflowMigration.aspx",this.iframesDic.var_purge_tables_data="Views/Vars/PurgeTablesData.aspx",this.iframesDic.var_generic_list_migrationPage="Views/Vars/GenericListMigrationPage.aspx",this.iframesDic.var_manage_addons="app/default.aspx?uri=grid/addonmanager",this.iframesDic.var_configurations_details="Views/Vars/ConfigurationsDetails.aspx",this.iframesDic.var_create_new_distributor="Views/Vars/DistributorAccount.aspx")}}return o.\u0275fac=function(n){return new(n||o)(r.\u0275\u0275directiveInject(S),r.\u0275\u0275directiveInject(a.ActivatedRoute),r.\u0275\u0275directiveInject(a.Router),r.\u0275\u0275directiveInject(_.DomSanitizer),r.\u0275\u0275directiveInject(u.Location))},o.\u0275cmp=r.\u0275\u0275defineComponent({type:o,selectors:[["addon"]],inputs:{hostObject:"hostObject"},outputs:{hostEvents:"hostEvents"},features:[r.\u0275\u0275ProvidersFeature([S]),r.\u0275\u0275NgOnChangesFeature],decls:4,vars:2,consts:[["id","legacy-var-main-container"],["width","0px","height","0px",2,"display","none",3,"src"],["id","myFrame","height","100%","width","100%",1,"embed-responsive-item",3,"src"],["iframe",""]],template:function(n,l){1&n&&(r.\u0275\u0275elementStart(0,"div",0),r.\u0275\u0275element(1,"iframe",1)(2,"iframe",2,3),r.\u0275\u0275elementEnd()),2&n&&(r.\u0275\u0275advance(1),r.\u0275\u0275property("src",l.iframeCookieVersionSrc,r.\u0275\u0275sanitizeResourceUrl),r.\u0275\u0275advance(1),r.\u0275\u0275property("src",l.iframeSRC,r.\u0275\u0275sanitizeResourceUrl))},styles:["#legacy-var-main-container[_ngcontent-%COMP%]   #myFrame[_ngcontent-%COMP%]{border:none;min-height:calc(100vh - 70px)}"]}),o})();const b=[{path:":settingsSectionName/:addon_uuid",component:s(6577).f,children:[{path:":editor",component:A},{path:"**",component:(()=>{class o{}return o.\u0275fac=function(n){return new(n||o)},o.\u0275cmp=r.\u0275\u0275defineComponent({type:o,selectors:[["app-empty-route"]],decls:2,vars:0,template:function(n,l){1&n&&(r.\u0275\u0275elementStart(0,"div"),r.\u0275\u0275text(1,"Route is not exist settings."),r.\u0275\u0275elementEnd())},encapsulation:2}),o})()}]}];let V=(()=>{class o{}return o.\u0275fac=function(n){return new(n||o)},o.\u0275mod=r.\u0275\u0275defineNgModule({type:o}),o.\u0275inj=r.\u0275\u0275defineInjector({imports:[a.RouterModule.forChild(b),a.RouterModule]}),o})(),T=(()=>{class o{}return o.\u0275fac=function(n){return new(n||o)},o.\u0275mod=r.\u0275\u0275defineNgModule({type:o}),o.\u0275inj=r.\u0275\u0275defineInjector({providers:[S],imports:[u.CommonModule,g.PepNgxLibModule]}),o})(),E=(()=>{class o{}return o.\u0275fac=function(n){return new(n||o)},o.\u0275mod=r.\u0275\u0275defineNgModule({type:o}),o.\u0275inj=r.\u0275\u0275defineInjector({imports:[u.CommonModule,g.PepNgxLibModule,T,V]}),o})()},7995:(U,M,s)=>{s.r(M);var u=s(455),g=s(6231),a=s(562);const w=[{path:"",loadChildren:()=>Promise.resolve().then(s.bind(s,8154)).then(e=>e.SettingsModule)},{path:"**",component:(()=>{class e{}return e.\u0275fac=function(i){return new(i||e)},e.\u0275cmp=a.\u0275\u0275defineComponent({type:e,selectors:[["app-empty-route"]],decls:2,vars:0,template:function(i,d){1&i&&(a.\u0275\u0275elementStart(0,"div"),a.\u0275\u0275text(1,"Route is not exist settings."),a.\u0275\u0275elementEnd())},encapsulation:2}),e})()}];let r=(()=>{class e{}return e.\u0275fac=function(i){return new(i||e)},e.\u0275mod=a.\u0275\u0275defineNgModule({type:e}),e.\u0275inj=a.\u0275\u0275defineInjector({imports:[g.RouterModule.forRoot(w),g.RouterModule]}),e})();var y=s(384),v=s(6577),j=s(8154),S=s(4768),D=s(9670);let _=(()=>{class e{constructor(i,d,C){this.injector=i,this.pepAddonService=C,this.pepAddonService.setDefaultTranslateLang(d)}ngDoBootstrap(){this.pepAddonService.defineCustomElement(`settings-element-${D.v.AddonUUID}`,v.f,this.injector)}}return e.\u0275fac=function(i){return new(i||e)(a.\u0275\u0275inject(a.Injector),a.\u0275\u0275inject(S.TranslateService),a.\u0275\u0275inject(y.PepAddonService))},e.\u0275mod=a.\u0275\u0275defineNgModule({type:e}),e.\u0275inj=a.\u0275\u0275defineInjector({providers:[S.TranslateStore],imports:[u.BrowserModule,y.PepNgxLibModule,j.SettingsModule,r,S.TranslateModule.forRoot({loader:{provide:S.TranslateLoader,useFactory:t=>y.PepAddonService.createMultiTranslateLoader(D.v.AddonUUID,t,["ngx-lib"]),deps:[y.PepAddonService]}})]}),e})();s(2923);const T="@angular-architects/module-federation-tools";function E(){const e=window;return e[T]=e[T]||{},e[T]}function o(e){const t=E();return e?e(t):t}function c(e){return Object.assign(E(),e)}let p=!0,m=!0,h=!0;function I(){const e=window;return e.platform=e.platform||{},e}function F(){return o(e=>e.platformCache)||c({platformCache:new Map}).platformCache}function G(e){if(!m)return e.platformFactory();const t=e.version(),i=t===a.VERSION.full?a.VERSION:t,d="string"==typeof i?i:i.full;let C=F().get(i)||h&&function L(e){const t=I().platform[e];return t instanceof a.PlatformRef?t:null}(d);return C||(C=e.platformFactory(),function B(e,t){m&&(h&&function W(e,t){I().platform[e]=t}(e.full,t),F().set(e,t))}(a.VERSION,C),e.production&&(0,a.enableProdMode)()),C}!function $(e,t){var i;p=!1!==t.ngZoneSharing,m=!1!==t.platformSharing,h=!1!==t.activeLegacyMode,t.platformFactory=t.platformFactory||(()=>(0,u.platformBrowser)()),t.version=t.version||(()=>a.VERSION),p&&!(null!==(i=t.compilerOptions)&&void 0!==i&&i.ngZone)&&(t.compilerOptions=t.compilerOptions||{},t.compilerOptions.ngZone=function z(){return o(e=>e.ngZone)||function N(){return window.ngZone}()}()),G(t).bootstrapModule(e,t.compilerOptions).then(d=>("shell"===t.appType?function Q(e){const t=e.get(a.NgZone,null);t?function K(e){p&&(h&&function Z(e){window.ngZone=e}(e),c({ngZone:e}))}(t):console.warn("No NgZone to share found")}(d.injector):"microfrontend"===t.appType&&function k(e){const t=e.get(g.Router);t?function f(e,t=!1){let i;t?(i=`${location.hash.substr(1)}${location.search}`,e.navigateByUrl(i),window.addEventListener("hashchange",()=>{e.navigateByUrl(i)})):(i=`${location.pathname.substr(1)}${location.search}`,e.navigateByUrl(i),window.addEventListener("popstate",()=>{e.navigateByUrl(i)}))}(t):console.warn("No router to connect found")}(d.injector),d))}(_,{production:!0,appType:"microfrontend"})}}]);